---
title: "Song Billboard Analysis in the 2010s"
author: "Chayanont Piyawatcharavijit"
categories: [analysis]
bibliography: reference.bib
date: "2024-09-30" 
image: thumbnail.jpeg
---

```{r}
#| echo: false

knitr::opts_chunk$set(
  fig.align = "center",
  out.width = "80%",
  code.line.numbers = FALSE,
  fig.retina = 2,
  echo = FALSE,
  message = FALSE,
  warning = FALSE,
  cache = FALSE
)
```

```{r message=FALSE, warning=FALSE}
#| warning: false
#| echo: false
#| message: false
library(tidyverse)
library(visdat)
library(tidyverse)
library(ggrepel)
library(knitr)
library(reshape2)
library(patchwork)
library(kableExtra)

billboard <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-09-14/billboard.csv')
audio_features <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-09-14/audio_features.csv')


audio_features %>%
  group_by(song_id) %>%
  filter(row_number() == 1)  %>% 
  ungroup() -> audio_features


billboard <- billboard %>% 
            mutate(year = year(mdy(week_id)),
                   week_id = mdy(week_id))


```



# TLDR; 

> We analyzed Billboard’s top 100 songs over the past decade and found that long-lasting hits, like "Radioactive" and "Sail," share key audio features—higher energy and lower acousticness. Essentially, the more energetic and less acoustic a song is, the more likely it is to stay popular. While danceability and speechiness don’t seem to make a big difference, energy and acousticness are like the secret sauce to a song’s longevity on the charts.


People around the world loves music people are enjoying to their favorite tracks 20.7 minutes each week on average which is almost a day! [@childs-youngIFPIGlobalStudy2023]. This come to this question have you ever wondered what makes couple of songs like Radioactive by Imagine Dragons, stay on the billboard for so long? In this analysis, we dive deeply into the trend of Billboard's top 100 songs over the past decade, exploring key audio features like energy and acousticness. 


# Key results

This @fig-audio-feat indicates each track feature measured by Spotify, a music streaming service. In the 2010s billboard from @fig-audio-feat, most of the indicators had almost the same value across the 2010s. However, four features show their significant difference in the past 10 years. Acousticness, speechiness, and danceability features were the three highest increases across 10 years. On the other hand, the energy feature had decreased the most by -1.3. This reflects the listener trend that transitions from the feature mentioned.

Even though music taste is a subjective topic to conclude, many people use music as an action tendency to move around which could imply as high danceability of the trend [@MusicEmotionWellBeing]. Despite a slightly downward trend of valence, arousal can by effected by music valence influence emotional response[@hofbauerEmotionalValencePerception2023a].

```{r}
#| label: fig-audio-feat
#| fig-cap: "Mean of Audio Features Over Time"
feature_long <- billboard %>% 
  left_join(audio_features, by = "song_id") %>% 
  pivot_longer(cols = c(danceability:valence),
               names_to = "features", 
               values_to = "value")

feature_trend <- feature_long %>% 
  filter(year %in% c(2010:2019)) %>%
  filter(!features %in% c("key", "loudness","mode")) %>% 
  group_by(year, features) %>% 
  summarize(mean_val = mean(value, na.rm = TRUE)) 

ggplot(feature_trend, aes(x = year, y = mean_val, color = features)) + 
  geom_line() + 
  geom_text(data = feature_trend %>% filter(year == 2019), 
            aes(label = paste0(round(mean_val, 2), " ", features)), 
            hjust = -0.1, 
            vjust = 0.3) + 
  geom_text(data = feature_trend %>% filter(year == 2010), 
              aes(label = round(mean_val, 2)), 
              vjust = 0.4,
              hjust = 1) + 
  labs(
    subtitle = "Mean from 2010 to 2019",
    x = "Year",
    y = "Mean Value"
  ) +
  scale_x_continuous(breaks = c(2010, 2013, 2016, 2019), expand = c(0.36, 1.0)) +
  theme_minimal() +
  theme(legend.position = "none")

```

Another aspect is the relationship between tracks that were able to maintain their rank on the chart for a long time and other tracks. From @tbl-top5, the top 5 highest tracks in the 2010s, these tracks were on the billboard for more than a year (52 weeks). Long-lasting Billboard hits, such as “Radioactive” with 87 weeks and “Sail” with 79 weeks on the chart, seem to have their unique similarity. They all have high energy (0.784 for "Radioactive") and are pretty danceable (0.825 for "Sail"). Also, they tend to have low acousticness, meaning it is more focused on music, which might be a reason why they maintain their tracks on the billboard.

```{r}
#| label: tbl-top5
#| tbl-cap: "Top 5 longest tracks on the Billboard"
billboard %>% 
  filter(year %in% 2010:2019) %>%
  left_join(audio_features, by = "song_id") %>% 
  group_by(song.x, performer.x, acousticness, danceability, speechiness, energy) %>% 
  summarize(weeks_on_chart = max(weeks_on_chart)) %>%
  arrange(-weeks_on_chart) %>% 
  rename("Song" = song.x,
         "Performer" = performer.x,
         "Weeks on chart" = weeks_on_chart) %>%
  head(5) %>%
  kbl("latex",
      booktabs = T,
      linesep = '') %>%
  kable_styling(full_width = F,
                bootstrap_options = c("condensed"),
                latex_options = "scale_down") %>%
  column_spec(1:2, width = "3cm") %>%  
  row_spec(0, bold = TRUE) %>% 
  row_spec(1:4,hline_after = TRUE)
```

To discuss @tbl-top5 in a bigger picture, @fig-dist highlights long-lasting songs generally have lower acousticness and higher energy, aligning with earlier findings, like in the case of “Radioactive.” While danceability and speechiness don’t differ much between short-term and long-lasting tracks, the data suggests that these factors might not significantly impact a song’s chart duration. Instead, tracks with more energy and less acoustic sound are more likely to stay popular on the charts for longer amounts of time. This shows how important these sound elements are for long-term success.

```{r}
#| label: fig-dist
#| fig-cap: "Distribution of Audio Features by Chart Duration"

# Prepare the data
tracks_with_genre <- audio_features %>%
  left_join(billboard, by = "song_id") %>% 
  #filter(year %in% c(2010:2019)) %>%
  mutate(extracted_genre = str_extract_all(spotify_genre, "'([^']*)'")) %>%
  unnest(extracted_genre) %>%
  mutate(extracted_genre = gsub("'", "", extracted_genre))

# Calculate weeks on chart and categorize
tracks_with_genre <- tracks_with_genre %>%
  group_by(song_id) %>%
  mutate(weeks_on_chart_max = max(weeks_on_chart),
         is_more_than_52 = if_else(weeks_on_chart_max >= 52, "More than or equal 52 weeks", "Less than 52 weeks")) %>%
  ungroup()

# Reshape data for boxplot
tracks_features_long <- tracks_with_genre %>%
  select(song_id, is_more_than_52, energy, acousticness, danceability, speechiness) %>%
  pivot_longer(cols = c(energy, acousticness, danceability, speechiness),
               names_to = "feature",
               values_to = "value") %>% 
    na.omit() 

ggplot(tracks_features_long, aes(x = is_more_than_52, 
                                 y = value, 
                                 fill = fct_reorder(feature,value))) +
  geom_boxplot() +
  facet_grid(~feature) +
  labs(x = "Audio Feature",
       y = "Value",
       fill = "More Than 52 Weeks") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1),
        legend.position = "none") 
  
```

# Brief methods

## Data source

There are two data sources for this analysis report retrieved by [\@TidytuesdayData2021](https://github.com/rfordatascience/tidytuesday/blob/master/data/2021/2021-09-14/readme.md) First Billboard's top 100 chart songs, a standard record chart in the US for songs by weekly Billboard magazine. Second, is the data source provided by Spotify, one of the most popular music stream services. Data dictionary for both data sources are provided in the [data dictionary](#sec-appendix)

## Data wrangling

For the data wangling part, all plots and tables were joined with each other by using **song_id**, a concatenate of song name and performer, as a key. For @fig-audio-feat and @fig-dist, data frames have been pivoted into long for an analysis. Before plotting into various perspectives by ggplot2 and table.

# Conclusion

In conclusion, over the past decade, the analysis of Billboard's top 100 tracks indicates songs that maintain their name on the charts for a long time tend to have more energy and less acousticness, reflecting those songs were more likely to remain on the chart for a long period. However, other features do not have much difference across years and chart duration. Energy and acousticness trend shifting can indicate a transition in listener preference. Further investigation could discover more about another aspect of the success of the tracks.


# Appendix

## Data dictionary {#sec-appendix}

**billboard dataset**

| variable       | variable | description                                                       |
|-------------|-------------|---------------------------------------------|
| week_id        | string   | Direct identifier of the week of the Billboard.                   |
| song           | string   | Song name                                                         |
| performer      | string   | Performer name                                                    |
| song_id        | string   | Direct identifier of the song, concatenate of song and performer. |
| weeks_on_chart | double   | Iteration of the week on the chart.                               |

**audio_features dataset (For fourth to the ninth variable are an indicator ranging from 0.0 - 1.0)**

| variable                 | variable | description                                                                                                 |
|-------------|-------------|-----------------------------------------------|
| song_id                  | string   | Direct identifier of the song, concatenate of song and performer.                                           |
| song                     | string   | Song name                                                                                                   |
| spotify_genre            | string   | Genre of the song by Spotify                                                                                |
| danceability             | double   | Describe how danceable the tracks are based on a combination of the various musical elements.               |
| energy                   | double   | Describe a measure of intensity and activity of the tracks based on perceptual features.                    |
| speechiness              | double   | Describe the occurrence of spoken words.                                                                    |
| acousticness             | double   | Describe the acousticness of the track.                                                                     |
| instrumentalness         | double   | Describe the instrumentalness of the track. The higher the value, the higher the portion of the instrument. |
| liveness                 | double   | Describe the chance of the tracks that are live performances.                                               |
| valence                  | double   | Describe the positiveity of the track. Higher valence means higher positivity of the track.                 |
| spotify_track_popularity | double   | Popularity of the track calculated by Spotify algorithm                                                     |

## Reference
